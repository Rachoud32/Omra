<div class="container">
    <div class="bg-light mt-5 p-3 d-flex flex-column ">
        <div class="mb-4 ">
            <input type="radio" name="omraType" value="package" id="package" class="form-check-input me-2"
                (change)="onChangeType()" [(ngModel)]="omraType" checked="omraType=='package'">
            <label for="package" class="me-3">Omra package / Visa</label>
            <input type="radio" name="omraType" value="map" id="map" class="form-check-input me-2"
                (change)="onChangeType()" [(ngModel)]="omraType" checked="omraType=='map'">
            <label for="map">Omra on map</label>
        </div>
        <form *ngIf="searchFormPackage && omraType=='package'" [formGroup]="searchFormPackage" class="mb-5">

            <div class="d-flex mb-3">
                <div class="dropdown me-2">
                    <button class="btn btn-dark" type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside"
                        aria-expanded="false">
                        Destination
                    </button>
                    <div class="dropdown-menu p-3">
                        <div>
                            <input type="radio" class="form-check-input me-2" name="departureCity" id="Tunis"
                                value="Tunis" formControlName="departureCity">
                            <label for="Tunis" class="me-3">Tunis</label>
                        </div>
                        <div>
                            <input type="radio" class="form-check-input me-2" name="departureCity" id="Djerba"
                                value="Djerba" formControlName="departureCity">
                            <label for="Djerba">Djerba</label>
                        </div>
                    </div>
                </div>
                <div class="dropdown me-2">
                    <button class="btn btn-dark" type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside"
                        aria-expanded="false">
                        Period
                    </button>
                    <div class="dropdown-menu p-3">
                        <div>
                            <input type="radio" name="period" class="form-check-input me-2" id="Mouled" value="Mouled"
                                formControlName="period">
                            <label for="Mouled" class="me-3">Mouled</label>
                        </div>
                        <div>
                            <input type="radio" name="period" class="form-check-input me-2" id="Ramadan" value="Ramadan"
                                formControlName="period">
                            <label for="Ramadan" class="me-3">Ramadan</label>
                        </div>
                        <div>
                            <input type="radio" name="period" class="form-check-input me-2" id="Chawel" value="Chawel"
                                formControlName="period">
                            <label for="Chawel" class="me-3">Chawel</label>
                        </div>
                        <div>
                            <input type="radio" name="period" class="form-check-input me-2" id="Vacances hiver"
                                value="Vacances hiver" formControlName="period">
                            <label for="Vacances hiver" class="me-3">Vacances hiver</label>
                        </div>
                        <div>
                            <input type="radio" name="period" class="form-check-input me-2" id="Vacancy Spring"
                                value="Vacancy Spring" formControlName="period">
                            <label for="Vacancy Spring" class="me-3">Vacancy Spring</label>
                        </div>
                        <div>
                            <input type="radio" name="period" class="form-check-input me-2" id="Other" value="Other"
                                formControlName="period">
                            <label for="Other" class="me-3">Other</label>
                        </div>
                    </div>
                </div>
                <div class="dropdown me-2">
                    <button class="btn btn-dark" type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside"
                        aria-expanded="false">
                        Duration of Omra
                    </button>
                    <div class="dropdown-menu p-3">
                        <div>
                            <input type="radio" name="omraDuration" class="form-check-input me-2" id="15 days"
                                value="15" formControlName="omraDuration">
                            <label for="15 days" class="me-3">15 days</label>
                        </div>
                        <div>
                            <input type="radio" name="omraDuration" class="form-check-input me-2" id="10 days"
                                value="10" formControlName="omraDuration">
                            <label for="10 days">10 days</label>
                        </div>
                    </div>
                </div>
                <div class="dropdown">
                    <button class="btn btn-dark" type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside"
                        aria-expanded="false">
                        Passengers
                    </button>
                    <div class="dropdown-menu p-3">
                        <div formArrayName="passengers">
                            <div *ngFor="let passenger of passengers.controls; let i = index;">
                                <div [formGroupName]="i" class="d-flex flex-column mb-2">
                                    <div class="d-flex justify-content-between">
                                        <span class="h6">Room number {{i+1}}</span>
                                        <div *ngIf="i!=0" (click)="deletePassenger(i)"><i class="bi bi-x"></i></div>
                                    </div>

                                    <div class="d-flex">
                                        <div class="">
                                            <label for="">Room</label>
                                            <input type="number" min="0" inputmode="numeric" formControlName="rooms">
                                        </div>
                                        <div class="">
                                            <label for="">Adults(in room)</label>
                                            <input type="number" min="0" formControlName="adults">
                                        </div>
                                        <div class="">
                                            <label for="">Children(in room)</label>
                                            <input type="number" min="0" formControlName="children">
                                        </div>
                                    </div>
                                    <hr *ngIf="i!=0 && i!=(passengers.length-1)">
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-success" (click)="addPassenger()"><i class="bi bi-plus"></i></button>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-end"><button (click)="searchPackage()"
                    class="btn btn-success">Search</button></div>

        </form>
        <form *ngIf="omraType=='map'" class="d-flex flex-column">
            <div>
                <div class="dp-hidden position-absolute">
                    <div class="input-group">
                        <input name="datepicker" class="form-control" ngbDatepicker #datepicker="ngbDatepicker"
                            [autoClose]="'outside'" (dateSelect)="onDateSelection($event)" [displayMonths]="2"
                            [dayTemplate]="t" style="border: 0; padding: 0; height: 40px;" outsideDays="hidden"
                            [startDate]="fromDate!" tabindex="-1" />
                        <ng-template #t let-date let-focused="focused">
                            <span class="custom-day" [class.focused]="focused" [class.range]="isRange(date)"
                                [class.faded]="isHovered(date) || isInside(date)" (mouseenter)="hoveredDate = date"
                                (mouseleave)="hoveredDate = null">
                                {{ date.day }}
                            </span>
                        </ng-template>
                    </div>
                </div>
                <button class="btn btn-primary px-4 d-flex" style="position: relative;z-index: 100;"
                    (click)="datepicker.toggle()" type="button">
                    <div class="me-4">{{formatter.format(fromDate)}} <i class="bi bi-calendar4 ms-2"></i></div>
                    <div>{{formatter.format(toDate)}} <i *ngIf="formatter.format(toDate)"
                            class="bi bi-calendar4 ms-2"></i>
                    </div>
                </button>
            </div>
            <div><button class="btn btn-success">Search</button></div>
        </form>
    </div>

</div>

<hr />
<br>
<br>
<br>
<br>
<pre>Search form : {{searchFormPackage?.value | json}}</pre>
<pre>From date model: {{ fromDate | json }}</pre>
<pre>To date model: {{ toDate | json }}</pre>